#!/bin/bash

# if supplied a preliminar query, add it to fzf
Q_PARAM=""
if [[ -n "$*" ]]; then
  export Q_PARAM="-q $*"
fi

# Get project name
PROJECT_NAME=$(
  tmuxinator list |
    tail +2 |
    perl -pe 's/([\w\-]+)\s+/$1\n/g' |
    fzf --preview "batcat --color=always $HOME/.config/tmuxinator/{}.yml" --cycle $Q_PARAM
)

tmuxinator start "$PROJECT_NAME"
