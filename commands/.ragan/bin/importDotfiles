#!/bin/bash
# get names of all folders in dotfiles

DOTFILES_DIR="$HOME/dotfiles"

(
  cd "$DOTFILES_DIR" || exit
  DOTFILE_PACKAGES=$(ls -d */)

  for PACKAGE in $DOTFILE_PACKAGES; do
    stow -t "$HOME" "$PACKAGE" -v "$@"
  done
)

RAGAN_BIN_DIR="$HOME/.ragan/bin"
LOCAL_BIN_DIR="$HOME/.local/bin"
RAGAN_BIN_FILES=$(ls -1b "$RAGAN_BIN_DIR")
(
  cd "$RAGAN_BIN_DIR" || exit
  for BIN in $RAGAN_BIN_FILES; do
    # skip if file not executable
    if [ ! -x "$BIN" ]; then
      continue
    fi

    # skip if link exists already
    if [ -x "$HOME/.local/bin/$BIN" ]; then
      continue
    fi

    echo "Adding \"$BIN\" link to ~/.local/bin"
    ln -s "$RAGAN_BIN_DIR/$BIN" "$LOCAL_BIN_DIR/$BIN"
  done
)
